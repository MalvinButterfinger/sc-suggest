var Recorder={swfObject:null,_callbacks:{},_events:{},_initialized:!1,options:{},initialize:function(a){this.options=a||{},this.options.flashContainer||this._setupFlashContainer(),this.bind("initialized",function(){Recorder._initialized=!0,a.initialized()}),this.bind("showFlash",this.options.onFlashSecurity||this._defaultOnShowFlash),this._loadFlash()},clear:function(){Recorder._events={}},record:function(a){a=a||{},this.clearBindings("recordingStart"),this.clearBindings("recordingProgress"),this.clearBindings("recordingCancel"),this.bind("recordingStart",this._defaultOnHideFlash),this.bind("recordingCancel",this._defaultOnHideFlash),this.bind("recordingCancel",this._loadFlash),this.bind("recordingStart",a.start),this.bind("recordingProgress",a.progress),this.bind("recordingCancel",a.cancel),this.flashInterface().record()},stop:function(){return this.flashInterface()._stop()},play:function(a){a=a||{},this.clearBindings("playingProgress"),this.bind("playingProgress",a.progress),this.bind("playingStop",a.finished),this.flashInterface()._play()},upload:function(a){a.audioParam=a.audioParam||"audio",a.params=a.params||{},this.clearBindings("uploadSuccess"),this.bind("uploadSuccess",function(b){a.success(Recorder._externalInterfaceDecode(b))}),this.flashInterface().upload(a.url,a.audioParam,a.params)},audioData:function(){return this.flashInterface().audioData().split(";")},request:function(a,b,c,d,e){var f=this.registerCallback(e);this.flashInterface().request(a,b,c,d,f)},clearBindings:function(a){Recorder._events[a]=[]},bind:function(a,b){Recorder._events[a]||(Recorder._events[a]=[]),Recorder._events[a].push(b)},triggerEvent:function(a,b,c){Recorder._executeInWindowContext(function(){for(var d in Recorder._events[a])Recorder._events[a][d]&&Recorder._events[a][d].apply(Recorder,[b,c])})},triggerCallback:function(a,b){Recorder._executeInWindowContext(function(){Recorder._callbacks[a].apply(null,b)})},registerCallback:function(a){var b="CB"+parseInt(999999*Math.random(),10);return Recorder._callbacks[b]=a,b},flashInterface:function(){return this.swfObject?this.swfObject.record?this.swfObject:this.swfObject.children[3].record?this.swfObject.children[3]:void 0:null},_executeInWindowContext:function(a){window.setTimeout(a,1)},_setupFlashContainer:function(){this.options.flashContainer=document.createElement("div"),this.options.flashContainer.setAttribute("id","recorderFlashContainer"),this.options.flashContainer.setAttribute("style","position: fixed; left: -9999px; top: -9999px; width: 230px; height: 140px; margin-left: 10px; border-top: 6px solid rgba(128, 128, 128, 0.6); border-bottom: 6px solid rgba(128, 128, 128, 0.6); border-radius: 5px 5px; padding-bottom: 1px; padding-right: 1px;"),document.body.appendChild(this.options.flashContainer)},_clearFlash:function(){var a=this.options.flashContainer.children[0];a&&this.options.flashContainer.removeChild(a)},_loadFlash:function(){this._clearFlash();var a=document.createElement("div");a.setAttribute("id","recorderFlashObject"),this.options.flashContainer.appendChild(a),swfobject.embedSWF(this.options.swfSrc,"recorderFlashObject","231","141","10.1.0",void 0,void 0,{allowscriptaccess:"always"},void 0,function(a){a.success?(Recorder.swfObject=a.ref,Recorder._checkForFlashBlock()):Recorder._showFlashRequiredDialog()})},_defaultOnShowFlash:function(){var a=Recorder.options.flashContainer;a.style.left=(window.innerWidth||document.body.offsetWidth)/2-115+"px",a.style.top=(window.innerHeight||document.body.offsetHeight)/2-70+"px"},_defaultOnHideFlash:function(){var a=Recorder.options.flashContainer;a.style.left="-9999px",a.style.top="-9999px"},_checkForFlashBlock:function(){window.setTimeout(function(){Recorder._initialized||Recorder.triggerEvent("showFlash")},500)},_showFlashRequiredDialog:function(){Recorder.options.flashContainer.innerHTML="<p>Adobe Flash Player 10.1 or newer is required to use this feature.</p><p><a href='http://get.adobe.com/flashplayer' target='_top'>Get it on Adobe.com.</a></p>",Recorder.options.flashContainer.style.color="white",Recorder.options.flashContainer.style.backgroundColor="#777",Recorder.options.flashContainer.style.textAlign="center",Recorder.triggerEvent("showFlash")},_externalInterfaceDecode:function(a){return a.replace(/%22/g,'"').replace(/%5c/g,"\\").replace(/%26/g,"&").replace(/%25/g,"%")}};if(void 0==swfobject)var swfobject=function(){function a(){if(!R){try{var a=K.getElementsByTagName("body")[0].appendChild(q("span"));a.parentNode.removeChild(a)}catch(b){return}R=!0;for(var c=N.length,d=0;c>d;d++)N[d]()}}function b(a){R?a():N[N.length]=a}function c(a){if(typeof J.addEventListener!=C)J.addEventListener("load",a,!1);else if(typeof K.addEventListener!=C)K.addEventListener("load",a,!1);else if(typeof J.attachEvent!=C)r(J,"onload",a);else if("function"==typeof J.onload){var b=J.onload;J.onload=function(){b(),a()}}else J.onload=a}function d(){M?e():f()}function e(){var a=K.getElementsByTagName("body")[0],b=q(D);b.setAttribute("type",G);var c=a.appendChild(b);if(c){var d=0;!function(){if(typeof c.GetVariable!=C){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),U.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d)return d++,void setTimeout(arguments.callee,10);a.removeChild(b),c=null,f()}()}else f()}function f(){var a=O.length;if(a>0)for(var b=0;a>b;b++){var c=O[b].id,d=O[b].callbackFn,e={success:!1,id:c};if(U.pv[0]>0){var f=p(c);if(f)if(!s(O[b].swfVersion)||U.wk&&U.wk<312)if(O[b].expressInstall&&h()){var k={};k.data=O[b].expressInstall,k.width=f.getAttribute("width")||"0",k.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(k.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(k.align=f.getAttribute("align"));for(var l={},m=f.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));i(k,l,c,d)}else j(f),d&&d(e);else u(c,!0),d&&(e.success=!0,e.ref=g(c),d(e))}else if(u(c,!0),d){var q=g(c);q&&typeof q.SetVariable!=C&&(e.success=!0,e.ref=q),d(e)}}}function g(a){var b=null,c=p(a);if(c&&"OBJECT"==c.nodeName)if(typeof c.SetVariable!=C)b=c;else{var d=c.getElementsByTagName(D)[0];d&&(b=d)}return b}function h(){return!S&&s("6.0.65")&&(U.win||U.mac)&&!(U.wk&&U.wk<312)}function i(a,b,c,d){S=!0,y=d||null,z={success:!1,id:c};var e=p(c);if(e){"OBJECT"==e.nodeName?(w=k(e),x=null):(w=e,x=c),a.id=H,(typeof a.width==C||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==C||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),K.title=K.title.slice(0,47)+" - Flash Player Installation";var f=U.ie&&U.win?"ActiveX":"PlugIn",g="MMredirectURL="+encodeURI(J.location).toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+K.title;if(typeof b.flashvars!=C?b.flashvars+="&"+g:b.flashvars=g,U.ie&&U.win&&4!=e.readyState){var h=q("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",!function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}l(a,b,c)}}function j(a){if(U.ie&&U.win&&4!=a.readyState){var b=q("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(k(a),b),a.style.display="none",!function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(k(a),a)}function k(a){var b=q("div");if(U.win&&U.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(D)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function l(a,b,c){var d,e=p(c);if(U.wk&&U.wk<312)return d;if(e)if(typeof a.id==C&&(a.id=c),U.ie&&U.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",P[P.length]=a.id,d=p(a.id)}else{var j=q(D);j.setAttribute("type",G);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(var l in b)b[l]!=Object.prototype[l]&&"movie"!=l.toLowerCase()&&m(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}return d}function m(a,b,c){var d=q("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function n(a){var b=p(a);b&&"OBJECT"==b.nodeName&&(U.ie&&U.win?(b.style.display="none",!function(){4==b.readyState?o(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function o(a){var b=p(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function p(a){var b=null;try{b=K.getElementById(a)}catch(c){}return b}function q(a){return K.createElement(a)}function r(a,b,c){a.attachEvent(b,c),Q[Q.length]=[a,b,c]}function s(a){var b=U.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function t(a,b,c,d){if(!U.ie||!U.mac){var e=K.getElementsByTagName("head")[0];if(e){var f=c&&"string"==typeof c?c:"screen";if(d&&(A=null,B=null),!A||B!=f){var g=q("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),A=e.appendChild(g),U.ie&&U.win&&typeof K.styleSheets!=C&&K.styleSheets.length>0&&(A=K.styleSheets[K.styleSheets.length-1]),B=f}U.ie&&U.win?A&&typeof A.addRule==D&&A.addRule(a,b):A&&typeof K.createTextNode!=C&&A.appendChild(K.createTextNode(a+" {"+b+"}"))}}}function u(a,b){if(T){var c=b?"visible":"hidden";R&&p(a)?p(a).style.visibility=c:t("#"+a,"visibility:"+c)}}function v(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=C?encodeURIComponent(a):a}{var w,x,y,z,A,B,C="undefined",D="object",E="Shockwave Flash",F="ShockwaveFlash.ShockwaveFlash",G="application/x-shockwave-flash",H="SWFObjectExprInst",I="onreadystatechange",J=window,K=document,L=navigator,M=!1,N=[d],O=[],P=[],Q=[],R=!1,S=!1,T=!0,U=function(){var a=typeof K.getElementById!=C&&typeof K.getElementsByTagName!=C&&typeof K.createElement!=C,b=L.userAgent.toLowerCase(),c=L.platform.toLowerCase(),d=/win/.test(c?c:b),e=/mac/.test(c?c:b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!1,h=[0,0,0],i=null;if(typeof L.plugins!=C&&typeof L.plugins[E]==D)i=L.plugins[E].description,!i||typeof L.mimeTypes!=C&&L.mimeTypes[G]&&!L.mimeTypes[G].enabledPlugin||(M=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof J.ActiveXObject!=C)try{var j=new ActiveXObject(F);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();!function(){U.w3&&((typeof K.readyState!=C&&"complete"==K.readyState||typeof K.readyState==C&&(K.getElementsByTagName("body")[0]||K.body))&&a(),R||(typeof K.addEventListener!=C&&K.addEventListener("DOMContentLoaded",a,!1),U.ie&&U.win&&(K.attachEvent(I,function(){"complete"==K.readyState&&(K.detachEvent(I,arguments.callee),a())}),J==top&&!function(){if(!R){try{K.documentElement.doScroll("left")}catch(b){return void setTimeout(arguments.callee,0)}a()}}()),U.wk&&!function(){return R?void 0:/loaded|complete/.test(K.readyState)?void a():void setTimeout(arguments.callee,0)}(),c(a)))}(),function(){U.ie&&U.win&&window.attachEvent("onunload",function(){for(var a=Q.length,b=0;a>b;b++)Q[b][0].detachEvent(Q[b][1],Q[b][2]);for(var c=P.length,d=0;c>d;d++)n(P[d]);for(var e in U)U[e]=null;U=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})}()}return{registerObject:function(a,b,c,d){if(U.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,O[O.length]=e,u(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return U.w3?g(a):void 0},embedSWF:function(a,c,d,e,f,g,j,k,m,n){var o={success:!1,id:c};U.w3&&!(U.wk&&U.wk<312)&&a&&c&&d&&e&&f?(u(c,!1),b(function(){d+="",e+="";var b={};if(m&&typeof m===D)for(var p in m)b[p]=m[p];b.data=a,b.width=d,b.height=e;var q={};if(k&&typeof k===D)for(var r in k)q[r]=k[r];if(j&&typeof j===D)for(var t in j)typeof q.flashvars!=C?q.flashvars+="&"+t+"="+j[t]:q.flashvars=t+"="+j[t];if(s(f)){var v=l(b,q,c);b.id==c&&u(c,!0),o.success=!0,o.ref=v}else{if(g&&h())return b.data=g,void i(b,q,c,n);u(c,!0)}n&&n(o)})):n&&n(o)},switchOffAutoHideShow:function(){T=!1},ua:U,getFlashPlayerVersion:function(){return{major:U.pv[0],minor:U.pv[1],release:U.pv[2]}},hasFlashPlayerVersion:s,createSWF:function(a,b,c){return U.w3?l(a,b,c):void 0},showExpressInstall:function(a,b,c,d){U.w3&&h()&&i(a,b,c,d)},removeSWF:function(a){U.w3&&n(a)},createCSS:function(a,b,c,d){U.w3&&t(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=K.location.search||K.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return v(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return v(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(S){var a=p(H);a&&w&&(a.parentNode.replaceChild(w,a),x&&(u(x,!0),U.ie&&U.win&&(w.style.display="block")),y&&y(z)),S=!1}}}}();var __hasProp=Object.prototype.hasOwnProperty;window.SC=window.SC||{},window.SC.URI=function(a,b){var c,d;return null==a&&(a=""),null==b&&(b={}),d=/^(?:([^:\/?\#]+):)?(?:\/\/([^\/?\#]*))?([^?\#]*)(?:\?([^\#]*))?(?:\#(.*))?/,c=/^(?:([^@]*)@)?([^:]*)(?::(\d*))?/,this.scheme=this.user=this.password=this.host=this.port=this.path=this.query=this.fragment=null,this.toString=function(){var a;return a="",this.isAbsolute()&&(a+=this.scheme,a+="://",null!=this.user&&(a+=this.user+":"+this.password+"@"),a+=this.host,null!=this.port&&(a+=":"+this.port)),a+=this.path,""!==this.path||null==this.query&&null==this.fragment||(a+="/"),null!=this.query&&(a+=this.encodeParamsWithPrepend(this.query,"?")),null!=this.fragment&&(a+=this.encodeParamsWithPrepend(this.fragment,"#")),a},this.isRelative=function(){return!this.isAbsolute()},this.isAbsolute=function(){return null!=this.host},this.decodeParams=function(a){var b,c,d,e,f,g,h,i;for(null==a&&(a=""),c={},i=a.split("&"),g=0,h=i.length;h>g;g++)d=i[g],""!==d&&(e=d.split("="),b=decodeURIComponent(e[0]),f=decodeURIComponent(e[1]||"").replace(/\+/g," "),this.normalizeParams(c,b,f));return c},this.normalizeParams=function(a,b,c){var d,e,f,g,h,i;return null==c&&(c=NULL),h=b.match(/^[\[\]]*([^\[\]]+)\]*(.*)/),f=h[1]||"",d=h[2]||"",""===d?a[f]=c:"[]"===d?(a[f]||(a[f]=[]),a[f].push(c)):(i=d.match(/^\[\]\[([^\[\]]+)\]$/)||(i=d.match(/^\[\](.+)$/)))?(e=i[1],a[f]||(a[f]=[]),g=a[f][a[f].length-1],null!=g&&g.constructor===Object&&null==g[e]?this.normalizeParams(g,e,c):a[f].push(this.normalizeParams({},e,c))):(a[f]||(a[f]={}),a[f]=this.normalizeParams(a[f],d,c)),a},this.encodeParamsWithPrepend=function(a,b){var c;return c=this.encodeParams(a),""!==c?b+c:""},this.encodeParams=function(a){var b,c,d,e,f,g,h,i;if(f="",a.constructor===String)return f=a;for(b=this.flattenParams(a),d=[],h=0,i=b.length;i>h;h++)e=b[h],c=e[0],g=e[1],d.push(null===g?c:c+"="+encodeURIComponent(g));return f=d.join("&")},this.flattenParams=function(a,b,c){var d,e,f,g,h;if(null==b&&(b=""),null==c&&(c=[]),null==a)null!=b&&c.push([b,null]);else if(a.constructor===Object)for(d in a)__hasProp.call(a,d)&&(f=a[d],e=""!==b?b+"["+d+"]":d,this.flattenParams(f,e,c));else if(a.constructor===Array)for(g=0,h=a.length;h>g;g++)f=a[g],this.flattenParams(f,b+"[]",c);else""!==b&&c.push([b,a]);return c},this.parse=function(a,b){var e,f,g,h,i;return null==a&&(a=""),null==b&&(b={}),g=function(a){return""===a?null:a},h=a.match(d),this.scheme=g(h[1]),e=h[2],null!=e&&(f=e.match(c),i=g(f[1]),null!=i&&(this.user=i.split(":")[0],this.password=i.split(":")[1]),this.host=g(f[2]),this.port=parseInt(f[3],10)||null),this.path=h[3],this.query=g(h[4]),b.decodeQuery&&(this.query=this.decodeParams(this.query)),this.fragment=g(h[5]),b.decodeFragment?this.fragment=this.decodeParams(this.fragment):void 0},this.parse(a.toString(),b),this},!function(){var AbstractDialog,ConnectDialog,EchoDialog,PickerDialog,_ref,_ref1,_ref2,__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};window.SC||(window.SC={}),SC.Helper={merge:function(a,b){var c,d,e,f,g;if(a.constructor===Array){for(d=Array.apply(null,a),f=0,g=b.length;g>f;f++)e=b[f],d.push(e);return d}d={};for(c in a)__hasProp.call(a,c)&&(e=a[c],d[c]=e);for(c in b)__hasProp.call(b,c)&&(e=b[c],d[c]=e);return d},groupBy:function(a,b){var c,d,e,f,g,h;for(c={},f=0,g=a.length;g>f;f++)d=a[f],(e=d[b])&&(c[h=d[b]]||(c[h]=[]),c[d[b]].push(d));return c},loadJavascript:function(a,b){var c;return c=document.createElement("script"),c.async=!0,c.src=a,SC.Helper.attachLoadEvent(c,b),document.body.appendChild(c),c},extractOptionsAndCallbackArguments:function(a,b){var c;return c={},null!=b?(c.callback=b,c.options=a):"function"==typeof a?(c.callback=a,c.options={}):c.options=a||{},c},openCenteredPopup:function(a,b,c){var d;return d={},null!=c?(d.width=b,d.height=c):d=b,d=SC.Helper.merge(d,{location:1,left:window.screenX+(window.outerWidth-d.width)/2,top:window.screenY+(window.outerHeight-d.height)/2,toolbar:"no",scrollbars:"yes"}),window.open(a,d.name,this._optionsToString(d))},_optionsToString:function(a){var b,c,d;c=[];for(b in a)__hasProp.call(a,b)&&(d=a[b],c.push(b+"="+d));return c.join(", ")},attachLoadEvent:function(a,b){return a.addEventListener?a.addEventListener("load",b,!1):a.onreadystatechange=function(){return"complete"===this.readyState?b():void 0}},millisecondsToHMS:function(a){var b,c,d,e,f;return b={h:Math.floor(a/36e5),m:Math.floor(a/6e4%60),s:Math.floor(a/1e3%60)},f=[],b.h>0&&f.push(b.h),c=b.m,d="",e="",b.m<10&&b.h>0&&(d="0"),b.s<10&&(e="0"),f.push(d+b.m),f.push(e+b.s),f.join(".")},setFlashStatusCodeMaps:function(a){return a["_status_code_map[400]"]=200,a["_status_code_map[401]"]=200,a["_status_code_map[403]"]=200,a["_status_code_map[404]"]=200,a["_status_code_map[422]"]=200,a["_status_code_map[500]"]=200,a["_status_code_map[503]"]=200,a["_status_code_map[504]"]=200},responseHandler:function(a,b){var c,d;return d=SC.Helper.JSON.parse(a),c=null,d?d.errors&&(c={message:d.errors&&d.errors[0].error_message}):c=b?{message:"HTTP Error: "+b.status}:{message:"Unknown error"},{json:d,error:c}},FakeStorage:function(){return{_store:{},getItem:function(a){return this._store[a]||null},setItem:function(a,b){return this._store[a]=b.toString()},removeItem:function(a){return delete this._store[a]}}},JSON:{parse:function(string){return"{"!==string[0]&&"["!==string[0]?null:null!=window.JSON?window.JSON.parse(string):eval(string)}}},window.SC=SC.Helper.merge(SC||{},{_version:"1.1.5",_baseUrl:"//connect.soundcloud.com",options:{site:"soundcloud.com",baseUrl:"//connect.soundcloud.com"},connectCallbacks:{},_popupWindow:void 0,initialize:function(a){var b,c,d;null==a&&(a={}),this.accessToken(a.access_token);for(b in a)__hasProp.call(a,b)&&(c=a[b],this.options[b]=c);return(d=this.options).flashXHR||(d.flashXHR=void 0===(new XMLHttpRequest).withCredentials),this},hostname:function(a){var b;return b="",null!=a&&(b+=a+"."),b+=this.options.site}}),window.SC=SC.Helper.merge(SC||{},{_apiRequest:function(a,b,c,d){var e,f;return null==d&&(d=c,c=void 0),c||(c={}),f=SC.prepareRequestURI(b,c),f.query.format="json",SC.options.flashXHR?SC.Helper.setFlashStatusCodeMaps(f.query):f.query["_status_code_map[302]"]=200,("PUT"===a||"DELETE"===a)&&(f.query._method=a,a="POST"),"GET"!==a&&(e=f.encodeParams(f.query),f.query={}),this._request(a,f,"application/x-www-form-urlencoded",e,function(a,b){var c;return c=SC.Helper.responseHandler(a,b),c.json&&"302 - Found"===c.json.status?SC._apiRequest("GET",c.json.location,d):d(c.json,c.error)})},_request:function(a,b,c,d,e){return SC.options.flashXHR?this._flashRequest(a,b,c,d,e):this._xhrRequest(a,b,c,d,e)},_xhrRequest:function(a,b,c,d,e){var f;return f=new XMLHttpRequest,f.open(a,b.toString(),!0),f.setRequestHeader("Content-Type",c),f.onreadystatechange=function(a){return 4===a.target.readyState?e(a.target.responseText,a.target):void 0},f.send(d)},_flashRequest:function(a,b,c,d,e){return this.whenRecordingReady(function(){return Recorder.request(a,b.toString(),c,d,function(a,b){return e(Recorder._externalInterfaceDecode(a),b)})})},post:function(a,b,c){return this._apiRequest("POST",a,b,c)},put:function(a,b,c){return this._apiRequest("PUT",a,b,c)},get:function(a,b,c){return this._apiRequest("GET",a,b,c)},"delete":function(a,b){return this._apiRequest("DELETE",a,{},b)},prepareRequestURI:function(a,b){var c,d,e;null==b&&(b={}),d=new SC.URI(a,{decodeQuery:!0});for(c in b)__hasProp.call(b,c)&&(e=b[c],d.query[c]=e);return d.isRelative()&&(d.host=this.hostname("api"),d.scheme=window.location.protocol.slice(0,-1)),null!=this.accessToken()?(d.query.oauth_token=this.accessToken(),d.scheme="https"):d.query.client_id=this.options.client_id,d},_getAll:function(a,b,c,d){return null==d&&(d=[]),null==c&&(c=b,b=void 0),b||(b={}),b.offset||(b.offset=0),b.limit||(b.limit=50),this.get(a,b,function(e){return e.constructor===Array&&e.length>0?(d=SC.Helper.merge(d,e),b.offset+=b.limit,SC._getAll(a,b,c,d)):c(d,null)})}}),window.SC=SC.Helper.merge(SC||{},{_connectWindow:null,connect:function(a){var b,c,d;if(d="function"==typeof a?{connected:a}:a,c={client_id:d.client_id||SC.options.client_id,redirect_uri:d.redirect_uri||SC.options.redirect_uri,response_type:"code_and_token",scope:d.scope||"non-expiring",display:"popup",window:d.window,retainWindow:d.retainWindow},c.client_id&&c.redirect_uri)return b=SC.dialog(SC.Dialog.CONNECT,c,function(a){if(null!=a.error)throw new Error("SC OAuth2 Error: "+a.error_description);return SC.accessToken(a.access_token),null!=d.connected&&d.connected(),null!=d.callback?d.callback():void 0}),this._connectWindow=b.options.window,b;throw"Options client_id and redirect_uri must be passed"},connectCallback:function(){return SC.Dialog._handleDialogReturn(SC._connectWindow)},disconnect:function(){return this.accessToken(null)},_trigger:function(a,b){return null!=this.connectCallbacks[a]?this.connectCallbacks[a](b):void 0},accessToken:function(a){var b,c;return c="SC.accessToken",b=this.storage(),void 0===a?b.getItem(c):null===a?b.removeItem(c):b.setItem(c,a)},isConnected:function(){return null!=this.accessToken()}}),window.SC=SC.Helper.merge(SC||{},{_dialogsPath:"/dialogs",dialog:function(a,b,c){var d,e,f;return d=SC.Helper.extractOptionsAndCallbackArguments(b,c),f=d.options,c=d.callback,f.callback=c,f.redirect_uri=this.options.redirect_uri,e=new SC.Dialog[a+"Dialog"](f),SC.Dialog._dialogs[e.id]=e,e.open(),e},Dialog:{ECHO:"Echo",CONNECT:"Connect",PICKER:"Picker",ID_PREFIX:"SoundCloud_Dialog",_dialogs:{},_isDialogId:function(a){return(a||"").match(new RegExp("^"+this.ID_PREFIX))},_getDialogIdFromWindow:function(a){var b,c;return c=new SC.URI(a.location,{decodeQuery:!0,decodeFragment:!0}),b=c.query.state||c.fragment.state,this._isDialogId(b)?b:null},_handleDialogReturn:function(a){var b,c;return c=this._getDialogIdFromWindow(a),b=this._dialogs[c],null!=b&&b.handleReturn()?delete this._dialogs[c]:void 0},_handleInPopupContext:function(){var a;if(this._getDialogIdFromWindow(window)&&!window.location.pathname.match(/\/dialogs\//)){if(a=navigator.userAgent.match(/OS 5(_\d)+ like Mac OS X/i))return window.opener.SC.Dialog._handleDialogReturn(window);if(window.opener)return window.opener.setTimeout(function(){return window.opener.SC.Dialog._handleDialogReturn(window)},1);if(window.top)return window.top.setTimeout(function(){return window.top.SC.Dialog._handleDialogReturn(window)},1)}},AbstractDialog:AbstractDialog=function(){function a(a){this.options=null!=a?a:{},this.id=this.generateId()}return a.prototype.WIDTH=456,a.prototype.HEIGHT=510,a.prototype.ID_PREFIX="SoundCloud_Dialog",a.prototype.PARAM_KEYS=["redirect_uri"],a.prototype.requiresAuthentication=!1,a.prototype.generateId=function(){return[this.ID_PREFIX,Math.ceil(1e6*Math.random()).toString(16)].join("_")},a.prototype.buildURI=function(a){var b,c,d,e;for(null==a&&(a=new SC.URI(SC._baseUrl)),a.scheme=window.location.protocol.slice(0,-1),a.path+=SC._dialogsPath+"/"+this.name+"/",a.fragment={state:this.id},this.requiresAuthentication&&(a.fragment.access_token=SC.accessToken()),e=this.PARAM_KEYS,c=0,d=e.length;d>c;c++)b=e[c],null!=this.options[b]&&(a.fragment[b]=this.options[b]);return a.port=null,a},a.prototype.open=function(){var a;return this.requiresAuthentication&&null==SC.accessToken()?this.authenticateAndOpen():(a=this.buildURI(),null!=this.options.window?this.options.window.location=a:this.options.window=SC.Helper.openCenteredPopup(a,{width:this.WIDTH,height:this.HEIGHT}))},a.prototype.authenticateAndOpen=function(){var a,b=this;return a=SC.connect({retainWindow:!0,window:this.options.window,connected:function(){return b.options.window=a.options.window,b.open()}})},a.prototype.paramsFromWindow=function(){var a,b;return b=new SC.URI(this.options.window.location,{decodeFragment:!0,decodeQuery:!0}),a=SC.Helper.merge(b.query,b.fragment)},a.prototype.handleReturn=function(){var a;return a=this.paramsFromWindow(),this.options.retainWindow||this.options.window.close(),this.options.callback(a)},a}(),EchoDialog:EchoDialog=function(a){function b(){return _ref=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.PARAM_KEYS=["client_id","redirect_uri","hello"],b.prototype.name="echo",b}(AbstractDialog),PickerDialog:PickerDialog=function(a){function b(){return _ref1=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.PARAM_KEYS=["client_id","redirect_uri"],b.prototype.name="picker",b.prototype.requiresAuthentication=!0,b.prototype.handleReturn=function(){var a,b=this;return a=this.paramsFromWindow(),"logout"===a.action?(SC.accessToken(null),this.open(),!1):null!=a.track_uri?(this.options.retainWindow||this.options.window.close(),SC.get(a.track_uri,function(a){return b.options.callback({track:a})}),!0):void 0},b}(AbstractDialog),ConnectDialog:ConnectDialog=function(a){function b(){return _ref2=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.PARAM_KEYS=["client_id","redirect_uri","client_secret","response_type","scope","display"],b.prototype.name="connect",b.prototype.buildURI=function(){var a;return a=b.__super__.buildURI.apply(this,arguments),a.scheme="https",a.host="soundcloud.com",a.path="/connect",a.query=a.fragment,a.fragment={},a},b}(AbstractDialog)}}),SC.Dialog._handleInPopupContext(),window.SC=SC.Helper.merge(SC||{},{Loader:{States:{UNLOADED:1,LOADING:2,READY:3},Package:function(a,b){return{name:a,callbacks:[],loadFunction:b,state:SC.Loader.States.UNLOADED,addCallback:function(a){return this.callbacks.push(a)},runCallbacks:function(){var a,b,c,d;for(d=this.callbacks,b=0,c=d.length;c>b;b++)a=d[b],a.apply(this);return this.callbacks=[]},setReady:function(){return this.state=SC.Loader.States.READY,this.runCallbacks()},load:function(){return this.state=SC.Loader.States.LOADING,this.loadFunction.apply(this)},whenReady:function(a){switch(this.state){case SC.Loader.States.UNLOADED:return this.addCallback(a),this.load();case SC.Loader.States.LOADING:return this.addCallback(a);case SC.Loader.States.READY:return a()}}}},packages:{},registerPackage:function(a){return this.packages[a.name]=a}}}),window.SC=SC.Helper.merge(SC||{},{oEmbed:function(a,b,c){var d,e;return null==c&&(c=b,b=void 0),b||(b={}),b.url=a,e=new SC.URI(window.location.protocol+"//"+SC.hostname()+"/oembed.json"),e.query=b,void 0!==c.nodeType&&1===c.nodeType&&(d=c,c=function(a){return d.innerHTML=a.html}),this._request("GET",e.toString(),null,null,function(a,b){var d;return d=SC.Helper.responseHandler(a,b),c(d.json,d.error)})}}),window.SC=SC.Helper.merge(SC||{},{_recorderSwfPath:"/recorder.js/recorder-0.9.0.swf",whenRecordingReady:function(a){return SC.Loader.packages.recording.whenReady(a)},record:function(a){return null==a&&(a={}),this.whenRecordingReady(function(){return Recorder.record(a)})},recordStop:function(a){return null==a&&(a={}),Recorder.stop()},recordPlay:function(a){return null==a&&(a={}),Recorder.play(a)},recordUpload:function(a,b){var c,d;return null==a&&(a={}),d=SC.prepareRequestURI("/tracks",a),d.query.format="json",SC.Helper.setFlashStatusCodeMaps(d.query),c=d.flattenParams(d.query),Recorder.upload({method:"POST",url:"https://"+this.hostname("api")+"/tracks",audioParam:"track[asset_data]",params:c,success:function(a){var c;return c=SC.Helper.responseHandler(a),b(c.json,c.error)}})}}),SC.Loader.registerPackage(new SC.Loader.Package("recording",function(){return Recorder.flashInterface()?SC.Loader.packages.recording.setReady():Recorder.initialize({swfSrc:SC._baseUrl+SC._recorderSwfPath+"?"+SC._version,initialized:function(){return SC.Loader.packages.recording.setReady()}})})),window.SC=SC.Helper.merge(SC||{},{storage:function(){return this._fakeStorage||(this._fakeStorage=new SC.Helper.FakeStorage)}}),window.SC=SC.Helper.merge(SC||{},{_soundmanagerPath:"/soundmanager2",_soundmanagerScriptPath:"/soundmanager2.js",whenStreamingReady:function(a){return SC.Loader.packages.streaming.whenReady(a)},_prepareStreamUrl:function(a){var b,c;return c=a.toString().match(/^\d.*$/)?"/tracks/"+a:a,b=SC.prepareRequestURI(c),b.path.match(/\/stream/)||(b.path+="/stream"),b.toString()},_setOnPositionListenersForComments:function(a,b,c){var d,e,f,g;e=SC.Helper.groupBy(b,"timestamp"),g=[];for(f in e)d=e[f],g.push(function(b,c,d){return a.onposition(parseInt(b,10),function(){return d(c)})}(f,d,c));return g},stream:function(a,b,c){var d,e,f=this;return d=SC.Helper.extractOptionsAndCallbackArguments(b,c),e=d.options,c=d.callback,SC.whenStreamingReady(function(){var b,d;return e.id="T"+a+"-"+Math.random(),e.url=f._prepareStreamUrl(a),b=function(a){var b;return b=soundManager.createSound(a),null!=c&&c(b),b},(d=e.ontimedcomments)?(delete e.ontimedcomments,SC._getAll(e.url.replace("/stream","/comments"),function(a){var c;return c=b(e),f._setOnPositionListenersForComments(c,a,d)})):b(e)})},streamStopAll:function(){return null!=window.soundManager?window.soundManager.stopAll():void 0}}),SC.Loader.registerPackage(new SC.Loader.Package("streaming",function(){var a;return null!=window.soundManager?SC.Loader.packages.streaming.setReady():(a=SC._baseUrl+SC._soundmanagerPath,window.SM2_DEFER=!0,SC.Helper.loadJavascript(a+SC._soundmanagerScriptPath,function(){return window.soundManager=new SoundManager,soundManager.url=a,soundManager.flashVersion=9,soundManager.useFlashBlock=!1,soundManager.useHTML5Audio=!1,soundManager.beginDelayedInit(),soundManager.onready(function(){return SC.Loader.packages.streaming.setReady()})}))}))}.call(this),function(){var requirejs,require,define,__inflate;!function(a){function b(a,b){var c,d,e,f,g,h,i,j=b&&b.split("/"),k=m.map,l=k&&k["*"]||{};if(a&&"."===a.charAt(0)&&b){for(j=j.slice(0,j.length-1),a=j.concat(a.split("/")),g=0;i=a[g];g++)if("."===i)a.splice(g,1),g-=1;else if(".."===i){if(1===g&&(".."===a[2]||".."===a[0]))return!0;g>0&&(a.splice(g-1,2),g-=2)}a=a.join("/")}if((j||l)&&k)for(c=a.split("/"),g=c.length;g>0;g-=1){if(d=c.slice(0,g).join("/"),j)for(h=j.length;h>0;h-=1)if(e=k[j.slice(0,h).join("/")],e&&(e=e[d])){f=e;break}if(f=f||l[d]){c.splice(0,g,f),a=c.join("/");break}}return a}function c(b,c){return function(){return j.apply(a,o.call(arguments,0).concat([b,c]))}}function d(a){return function(c){return b(c,a)}}function e(a){return function(b){k[a]=b}}function f(b){if(l.hasOwnProperty(b)){var c=l[b];delete l[b],n[b]=!0,i.apply(a,c)}if(!k.hasOwnProperty(b))throw new Error("No "+b);
return k[b]}function g(a,c){var e,g,h=a.indexOf("!");return-1!==h?(e=b(a.slice(0,h),c),a=a.slice(h+1),g=f(e),a=g&&g.normalize?g.normalize(a,d(c)):b(a,c)):a=b(a,c),{f:e?e+"!"+a:a,n:a,p:g}}function h(a){return function(){return m&&m.config&&m.config[a]||{}}}var i,j,k={},l={},m={},n={},o=[].slice;i=function(b,d,i,j){var m,o,p,q,r,s,t=[];if(j=j||b,"string"==typeof i&&(i=__inflate(b,i)),"function"==typeof i){for(d=!d.length&&i.length?["require","exports","module"]:d,s=0;s<d.length;s++)if(r=g(d[s],j),p=r.f,"require"===p)t[s]=c(b);else if("exports"===p)t[s]=k[b]={},m=!0;else if("module"===p)o=t[s]={id:b,uri:"",exports:k[b],config:h(b)};else if(k.hasOwnProperty(p)||l.hasOwnProperty(p))t[s]=f(p);else if(r.p)r.p.load(r.n,c(j,!0),e(p),{}),t[s]=k[p];else if(!n[p])throw new Error(b+" missing "+p);q=i.apply(k[b],t),b&&(o&&o.exports!==a&&o.exports!==k[b]?k[b]=o.exports:q===a&&m||(k[b]=q))}else b&&(k[b]=i)},requirejs=require=j=function(b,c,d,e){return"string"==typeof b?f(g(b,c).f):(b.splice||(m=b,c.splice?(b=c,c=d,d=null):b=a),c=c||function(){},e?i(a,b,c,d):setTimeout(function(){i(a,b,c,d)},15),j)},j.config=function(a){return m=a,j},define=function(a,b,c){b.splice||(c=b,b=[]),l[a]=[a,b,c]},define.amd={jQuery:!0}}(),__inflate=function(name,src){var r;return eval(["r = function(a,b,c){","\n};\n//@ sourceURL="+name+"\n"].join(src)),r},define("lib/api/events",["require","exports","module"],function(a,b){b.api={LOAD_PROGRESS:"loadProgress",PLAY_PROGRESS:"playProgress",PLAY:"play",PAUSE:"pause",FINISH:"finish",SEEK:"seek",READY:"ready",OPEN_SHARE_PANEL:"sharePanelOpened",CLICK_DOWNLOAD:"downloadClicked",CLICK_BUY:"buyClicked",ERROR:"error"},b.bridge={REMOVE_LISTENER:"removeEventListener",ADD_LISTENER:"addEventListener"}}),define("lib/api/getters",["require","exports","module"],function(a,b,c){c.exports={GET_VOLUME:"getVolume",GET_DURATION:"getDuration",GET_POSITION:"getPosition",GET_SOUNDS:"getSounds",GET_CURRENT_SOUND:"getCurrentSound",GET_CURRENT_SOUND_INDEX:"getCurrentSoundIndex",IS_PAUSED:"isPaused"}}),define("lib/api/setters",["require","exports","module"],function(a,b,c){c.exports={PLAY:"play",PAUSE:"pause",TOGGLE:"toggle",SEEK_TO:"seekTo",SET_VOLUME:"setVolume",NEXT:"next",PREV:"prev",SKIP:"skip"}}),define("lib/api/api",["require","exports","module","lib/api/events","lib/api/getters","lib/api/setters"],function(a,b,c){function d(a){return!!(""===a||a&&a.charCodeAt&&a.substr)}function e(a){return!!(a&&a.constructor&&a.call&&a.apply)}function f(a){return!!a&&1===a.nodeType&&"IFRAME"===a.nodeName.toUpperCase()}function g(a){var b,c=!1;for(b in B)if(B.hasOwnProperty(b)&&B[b]===a){c=!0;break}return c}function h(a){var b,c,d;for(b=0,c=G.length;c>b&&(d=a(G[b]),d!==!1);b++);}function i(a){var b,c,d,e="";for("//"===a.substr(0,2)&&(a=window.location.protocol+a),d=a.split("/"),b=0,c=d.length;c>b&&3>b;b++)e+=d[b],2>b&&(e+="/");return e}function j(a){return a.contentWindow?a.contentWindow:a.contentDocument&&"parentWindow"in a.contentDocument?a.contentDocument.parentWindow:null}function k(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(a[b]);return c}function l(a,b,c){c.callbacks[a]=c.callbacks[a]||[],c.callbacks[a].push(b)}function m(a,b){var c,d=!0;return b.callbacks[a]=[],h(function(b){return c=b.callbacks[a]||[],c.length?(d=!1,!1):void 0}),d}function n(a,b,c){var d,e,f=j(c);return f.postMessage?(d=c.getAttribute("src").split("?")[0],e=JSON.stringify({method:a,value:b}),"//"===d.substr(0,2)&&(d=window.location.protocol+d),d=d.replace(/http:\/\/(w|wt).soundcloud.com/,"https://$1.soundcloud.com"),f.postMessage(e,d),void 0):!1}function o(a){var b;return h(function(c){return c.instance===a?(b=c,!1):void 0}),b}function p(a){var b;return h(function(c){return j(c.element)===a?(b=c,!1):void 0}),b}function q(a,b){return function(c){var d=e(c),f=o(this),g=!d&&b?c:null,h=d&&!b?c:null;return h&&l(a,h,f),n(a,g,f.element),this}}function r(a,b,c){var d,e,f;for(d=0,e=b.length;e>d;d++)f=b[d],a[f]=q(f,c)}function s(a,b,c){return a+"?url="+b+"&"+t(c)}function t(a){var b,c,d=[];for(b in a)a.hasOwnProperty(b)&&(c=a[b],d.push(b+"="+("start_track"===b?parseInt(c,10):c?"true":"false")));return d.join("&")}function u(a,b,c){var d,e,f=a.callbacks[b]||[];for(d=0,e=f.length;e>d;d++)f[d].apply(a.instance,c);(g(b)||b===D.READY)&&(a.callbacks[b]=[])}function v(a){var b,c,d,e,f;try{c=JSON.parse(a.data)}catch(g){return!1}return b=p(a.source),d=c.method,e=c.value,b&&w(a.origin)!==w(b.domain)?!1:b?(d===D.READY&&(b.isReady=!0,u(b,H),m(H,b)),d===D.PLAY&&!b.playEventFired&&(b.playEventFired=!0),d===D.PLAY_PROGRESS&&!b.playEventFired&&(b.playEventFired=!0,u(b,D.PLAY,[e])),f=[],void 0!==e&&f.push(e),u(b,d,f),void 0):(d===D.READY&&F.push(a.source),!1)}function w(a){return a.replace(J,"")}var x,y,z,A=a("lib/api/events"),B=a("lib/api/getters"),C=a("lib/api/setters"),D=A.api,E=A.bridge,F=[],G=[],H="__LATE_BINDING__",I="http://wt.soundcloud.dev:9200/",J=/^http(?:s?)/;window.addEventListener?window.addEventListener("message",v,!1):window.attachEvent("onmessage",v),c.exports=z=function(a,b,c){if(d(a)&&(a=document.getElementById(a)),!f(a))throw new Error("SC.Widget function should be given either iframe element or a string specifying id attribute of iframe element.");b&&(c=c||{},a.src=s(I,b,c));var e,g,h=p(j(a));return h&&h.instance?h.instance:(e=F.indexOf(j(a))>-1,g=new x(a),G.push(new y(g,a,e)),g)},z.Events=D,window.SC=window.SC||{},window.SC.Widget=z,y=function(a,b,c){this.instance=a,this.element=b,this.domain=i(b.getAttribute("src")),this.isReady=!!c,this.callbacks={}},x=function(){},x.prototype={constructor:x,load:function(a,b){if(a){b=b||{};var c=this,d=o(this),e=d.element,f=e.src,g=f.substr(0,f.indexOf("?"));d.isReady=!1,d.playEventFired=!1,e.onload=function(){c.bind(D.READY,function(){var a,c=d.callbacks;for(a in c)c.hasOwnProperty(a)&&a!==D.READY&&n(E.ADD_LISTENER,a,d.element);b.callback&&b.callback()})},e.src=s(g,a,b)}},bind:function(a,b){var c=this,d=o(this);return d&&d.element&&(a===D.READY&&d.isReady?setTimeout(b,1):d.isReady?(l(a,b,d),n(E.ADD_LISTENER,a,d.element)):l(H,function(){c.bind(a,b)},d)),this},unbind:function(a){var b,c=o(this);c&&c.element&&(b=m(a,c),a!==D.READY&&b&&n(E.REMOVE_LISTENER,a,c.element))}},r(x.prototype,k(B)),r(x.prototype,k(C),!0)}),window.SC=window.SC||{},window.SC.Widget=require("lib/api/api")}(),angular.module("scSuggestApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/suggest",{templateUrl:"views/suggest.html",controller:"SuggestCtrl"}).otherwise({redirectTo:"/"})}]),function(a){function b(){function a(){var a=Q.defer();return j("/me").then(function(b){m("/me").then(function(c){a.resolve({favorites:b,followings:c})})}),a.promise}function b(a){var b=Q.defer();return l(a).then(f).then(b.resolve,b.reject),b.promise}function c(a){var b=Q.defer();return m(a).then(g).then(f).then(b.resolve,b.reject),b.promise}function d(a){var b=Q.defer();return j(a).then(h).then(b.resolve,b.reject),b.promise}function e(a){var b=Q.defer();return k(a).then(f).then(b.resolve,b.reject),b.promise}function f(a){return i(a,function(a){return j("/users/"+a.id)})}function g(a){return i(a,function(a){return l("/users/"+a.id)})}function h(a){return i(a,function(a){return k("/tracks/"+a.id)}).then(f)}function i(a,b){var c=Q.defer();return Q.all(a.filter(function(a){return!a.count||a.count>1}).map(b)).then(function(a){for(var b=[],d=0;d<a.length;d++)for(var e=a[d],f=0;f<e.length;f++){var g=e[f],h=b.filter(function(a){return a.item.id==g.id});0==h.length?b.push({id:g.id,item:g,count:1}):h[0].count++}c.resolve(b)},c.reject),c.promise}function j(a){return u[a]?Q.fcall(function(){return u[a]}):r(a+"/favorites").then(p(a))}function k(a){return t[a]?Q.fcall(function(){return t[a]}):r(a+"/favoriters").then(o(a))}function l(a){return v[a]?Q.fcall(function(){return v[a]}):r(a+"/followers").then(n(a))}function m(a){return r(a+"/followings")}function n(a){return function(b){return v[a]=b,Q.fcall(function(){return b})}}function o(a){return function(b){return t[a]=b,Q.fcall(function(){return b})}}function p(a){return function(b){return u[a]=b,Q.fcall(function(){return b})}}function q(){var a=Q.defer();return SC.connect(function(){a.resolve()}),s(5e3,500,a,q),a.promise}function r(a,b){function c(a,b,e){return b=b||0,b>10?void d.reject(a+""+e.message):void SC.get(a,{limit:199,linked_partitioning:1},function(e,f){if(f)return void c(a,++b,f);if(e.collection){{e.collection}d.resolve(e.collection)}else d.resolve(e)})}b=b||0;var d=Q.defer();return c(a),d.promise}function s(a,b,c,d){var e=0;!function f(){return e>a/b?void c.reject("Timeout: "+d):(e++,void setTimeout(f,b))}()}var t=[],u=[],v=[],w={get:r,getMyData:a,getFavorites:j,getFavoriters:k,getFollowings:m,getFavoritesForTrackFavoriters:e,getFavoriterFavoritesForUserFavorites:d,getFavoritesForUserFollowers:b,getFavoritesForUserFollowings:c,connect:q};return w}a.qsc=b()}(window),angular.module("scSuggestApp").controller("MainCtrl",["$scope","$timeout",function(a,b){function c(){SC.initialize({client_id:"747e72b7a1a64556d542a254e330fcc0",redirect_uri:"http://localhost:9000/callback.html"})}function d(){qsc.connect().then(qsc.getMyData).then(function(b){a.connected=!0,a.inputOptions=[{label:"my favorites",value:1},{label:"my followings",value:2},{label:"track",value:3},{label:"artist",value:4},{label:"user",value:5}],a.inputOption=a.inputOptions[0],a.filteredTracks=b.favorites,a.filteredUsers=b.followings,a.$apply()})}function e(){switch(a.errorText="",a.outputOption.value){case 1:switch(a.inputOption.value){case 1:f("/me");break;case 2:g("/me");break;case 3:SC.get("/resolve",{url:a.inputUrl},function(a){h("/tracks/"+a.id)});break;case 4:SC.get("/resolve",{url:a.inputUrl},function(a){i("/users/"+a.id)});break;case 5:SC.get("/resolve",{url:a.inputUrl},function(b){qsc.getFavorites("/users/"+b.id).then(function(b){a.filteredTracks=b}).then(function(){qsc.getFollowings("/users/"+b.id).then(function(c){a.filteredUsers=c,f("/users/"+b.id)})})})}break;case 2:}}function f(c){a.hasResults=!1,a.loading=!0,b(function(){qsc.getFavoriterFavoritesForUserFavorites(c).then(j,k)})}function g(c){a.hasResults=!1,a.loading=!0,b(function(){qsc.getFavoritesForUserFollowings(c).then(j,k)})}function h(c){a.hasResults=!1,a.loading=!0,b(function(){qsc.getFavoritesForTrackFavoriters(c).then(j,k)})}function i(c){a.hasResults=!1,a.loading=!0,b(function(){qsc.getFavoritesForUserFollowers(c).then(j,k)})}function j(b){b.sort(function(a,b){return b.count-a.count}),a.filteredTracks&&a.filteredUsers&&(b=b.filter(function(b){return 0==a.filteredTracks.filter(function(a){return a.id==b.id}).length&&0==a.filteredUsers.filter(function(a){return a.id==b.item.user.id}).length})),a.suggested=b.slice(0,2e3).map(function(a,b){return{rank:b,status:"",info:a.item.user.username+" - "+a.item.title,purl:a.item.permalink_url,url:"https://w.soundcloud.com/player/?url="+a.item.permalink_url,count:a.count,id:a.id}}),a.loading=!1,a.hasResults=!0,a.$apply()}function k(c){a.errorText=c,b(function(){a.$apply()})}function l(c){c&&b(function(){angular.element("#widget-iframe").attr("src",a.suggested[0].url),s.widget=SC.Widget("widget-iframe"),s.widget.bind(SC.Widget.Events.FINISH,function(a){1==a.relativePosition&&o()}),a.currentPosition=0,r()})}function m(){a.hasResults&&(a.paused||(a.currentPosition=0),r())}function n(b){a.currentItem.status="",a.currentItem.htmlClass="",a.currentPosition=b,r()}function o(){a.hasResults&&(a.currentItem.status="",a.currentItem.htmlClass="",a.currentPosition++,a.currentPosition==a.suggested.length&&(a.currentPosition=0),r(),b(function(){a.$apply()}))}function p(){a.paused=!0,a.currentItem.status="",a.currentItem.htmlClass="warning",s.widget.pause()}function q(){a.currentItem.status="",a.currentPosition>0?$sc.currentPosition--:a.currentPosition=a.suggested.length-1,r()}function r(){a.currentItem=a.suggested[a.currentPosition],a.currentItem.status="playing",a.currentItem.htmlClass="success",a.paused?s.widget.play():s.widget.load(a.currentItem.purl,{auto_play:!0}),a.paused=!1,b(function(){a.$apply()})}var s=this;a.inputOptions=[{label:"track",value:3},{label:"artist",value:4},{label:"user",value:5}],a.inputOption=a.inputOptions[0],a.outputOptions=[{label:"tracks",value:1}],a.outputOption=a.outputOptions[0],a.inputUrl="",a.connect=d,a.getTracks=e,a.next=o,a.previous=q,a.pause=p,a.next=o,a.play=m,a.connected=!1,a.hasResults=!1,a.currentPosition=0,a.currentItem={},a.playTrack=n,a.inputPlaceholder="",a.paused=!1,a.loading=!1,a.errorText="",a.showInput=function(){return a.inputOption.value>2},c(),a.$watch("hasResults",l),a.$watch("inputOption",function(b){switch(b.value){case 1:case 2:a.inputPlaceholder="";break;case 3:a.inputPlaceholder="track url";break;case 4:case 5:a.inputPlaceholder="user url"}}),a.$watch("inputUrl",function(a,b){console.log(a+b)})}]);